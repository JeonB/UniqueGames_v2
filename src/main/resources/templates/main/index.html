<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Unique Games</title>
  <link rel="stylesheet" th:href="@{/css/mainunigames.css}">
  <link rel="stylesheet" th:href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />
  <script th:src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>
  <script th:src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
  <script th:src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
  <script>
    document.addEventListener('click', function(event) {
      if (event.target.matches('#btn-like-style')) {
        var gameId = event.target.getAttribute('data-game-id');
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/like', true);
        xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xhr.onreadystatechange = function() {
          if (xhr.readyState === 4 && xhr.status === 200) {
            var response = JSON.parse(xhr.responseText);
            alert(response.message);
          }
        };
        xhr.send('gameId=' + gameId);
      }
    });
  </script>
</head>
<body>
<header th:include="header"></header>
<div class="swiper">
  <div class="swiper-wrapper">
    <div class="swiper-slide">
      <div class="silde1">
        <div id="slide-text">
          <h2>디 엑시트 이터널 매터스</h2>
          <h1>DE-EXIT - Eternal Matters</h1>
          <p>죽음을 넘어선 생명을 느끼다</p>
          <a th:href="@{/detail/1}"><button id="btn-main-style" type="button" style="cursor:pointer">자세히보기</button></a>
        </div>
      </div>
    </div>
    <!-- ... Rest of the slides ... -->
  </div>

  <div class="swiper-pagination"></div>

  <div class="swiper-button-prev">
    <button class="btn__prev"><img th:src="@{/images/btn_main-arrow_left.png}"></button>
  </div>
  <div class="swiper-button-next">
    <button class="btn__next"><img th:src="@{/images/btn_main-arrow_right.png}"></button>
  </div>
</div>
<img id="topGame-title" th:src="@{/images/imt_title_top.png}" width="135px" height="32px">
<div id="menu-topGame">
  <div id="topGameList">
    <div th:each="game, loop: ${ranking}" th:if="${loop.count <= 4}" id="tList">
      <a th:href="@{/detail/{id}(id=${game.id})}"><img alt="#" th:src="${game.image_path}" width="500px" height="240px"></a>
      <div>
        <p th:text="${loop.count}"></p>
        <li id="cyber"><a th:href="@{/detail/{id}(id=${game.id})}" th:text="${game.name}"></a></li>
        <p id="cyber2" th:text="${game.description}"></p>
        <a th:href="@{/topgame}"><button id="readmore-plus" type="button"><img th:src="@{/images/btn_plus_normal.png}" width="30px" height="30px"></button></a>
      </div>
    </div>
  </div>
</div>
<section id="menu-main1">
  <img id="recommendations-title" th:src="@{/images/img_title_recommendations.png}" width="262px" height="26px">
  <p id="subTitle">#최근 반응이 좋은</p>
  <div id="menu-recommendations">
    <div id="recommendList">
      <div th:each="game, loop: ${donation}" th:if="${loop.index < 4}" id="rList">
        <img th:src="${game.image_path}" width="260px" height="180px">
        <ul>
          <li>Hot</li>
          <li th:text="${game.name}"></li>
          <li th:text="${game.game_genre}"></li>
          <li><img th:src="@{/images/img_icon_rPc.png}"></li>
        </ul>
        <div>
          <a th:href="@{/detail/{id}(id=${game.id})}">
            <button id="btn-recommend-style" type="button">자세히보기</button>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
<section id="menu-main2">
  <img id="allList-title" th:src="@{/images/img_title_AllList.png}" width="100px" height="24px">
  <div id="menu-allList">
    <div id="gameList">
      <div th:each="game: ${gameList}" id="gList">
        <img th:src="${game.image_path}" width="260px" height="180px">
        <ul>
          <li><a th:href="@{/detail/{id}(id=${game.id})}" th:text="${game.name}"></a></li>
          <li th:text="${game.game_genre}"></li>
          <li><a th:href="@{/detail/{id}(id=${game.id})}"><button id="btn-like-style" type="button" th:data-game-id="${game.id}"></button></a></li>
          <li th:text="${game.like_count}"></li>
          <li><img th:src="@{/images/img_icon_rPc.png}"></li>
        </ul>
      </div>
    </div>
  </div>
</section>
<section id="menu-main3">
  <img id="solution-title" th:src="@{/images/img_title_notice.png}" width="90px" height="25px">
  <p id="subTitle">#공지사항 #필독</p>
  <div id="menu-solution">
    <table>
      <tr>
        <th>번호</th>
        <th>제목</th>
        <th>작성자</th>
        <th>작성일</th>
      </tr>
      <tr th:each="noticeVo: ${noticeList}">
        <td th:text="${noticeVo.rno}"></td>
        <td><a th:href="@{/notice_content}(no=${noticeVo.post_id})" th:text="${noticeVo.title}"></a></td>
        <td th:text="${noticeVo.company_id}"></td>
        <td th:text="${noticeVo.date_output}"></td>
      </tr>
    </table>
    <div id="solution-btn-area">
      <a th:href="@{/notice_list}"><button id="btn-solution" type="button">자세히보기</button></a>
    </div>
  </div>
</section>
<jsp:include page="footer.jsp"></jsp:include>
<script th:inline="javascript">
  new Swiper('.swiper', {
    autoplay: {
      delay: 4000
    },
    loop: true,
    slidesPerView: 1,
    spaceBetween: 0,
    pagination: {
      el: '.swiper-pagination',
      clickable: true
    },
    navigation: {
      prevEl: '.swiper-button-prev',
      nextEl: '.swiper-button-next'
    }
  })
</script>
</body>
</html>
